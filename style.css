:root { --blue:#1a73e8; --text:#111; --muted:#666; }
* { box-sizing: border-box; }
body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text); }
.wrapper { max-width: 920px; margin: 0 auto; padding: 1.2rem; }

/* Default knobs (work okay everywhere) */
:root{
  --anchor-nudge-x: -0.02em;   /* kerning compensation */
  --anchor-nudge-y: 0.05em;   /* baseline correction */
}

/* Platform-specific tweaks */
.font-win   { --anchor-nudge-x: -0.022em; --anchor-nudge-y: -0.055em; --chord-gap: 0.10em; }  /* Windows / Segoe UI */
.font-mac   { --anchor-nudge-x: -0.018em; --anchor-nudge-y: -0.045em; --chord-gap: 0.12em; }  /* macOS / SF */
.font-ios   { --anchor-nudge-x: -0.018em; --anchor-nudge-y: -0.045em; --chord-gap: 0.12em; }  /* iOS / SF */
.font-android{--anchor-nudge-x: -0.016em; --anchor-nudge-y: -0.042em; --chord-gap: 0.11em; }  /* Android / Roboto */
.font-linux { --anchor-nudge-x: -0.020em; --anchor-nudge-y: -0.050em; --chord-gap: 0.13em; }  /* Ubuntu/DejaVu/etc. */


.site-header { border-bottom:1px solid #eee; position:sticky; top:0; background:#fff; z-index:10; }
.site-header .wrapper { display:flex; align-items:center; gap:1rem; }
.site-title { font-size:1.3rem; font-weight:600; text-decoration:none; color:var(--text); }
.site-title:hover { color:var(--blue); }

.toggle-wrap { margin-left:auto; display:flex; align-items:center; gap:.6rem; color:var(--muted); }
.switch { position:relative; display:inline-block; width:46px; height:24px; }
.switch input { display:none; }
.slider { position:absolute; cursor:pointer; inset:0; background:#ccc; transition:.2s; border-radius:999px; }
.slider:before { position:absolute; content:""; height:18px; width:18px; left:3px; top:3px; background:white; transition:.2s; border-radius:50%; }
input:checked + .slider { background:var(--blue); }
input:checked + .slider:before { transform:translateX(22px); }

h1,h2 { margin:.6rem 0 1rem; }
ol { padding-left:1.2rem; }
a { color:var(--blue); text-decoration:none; }
a:hover { text-decoration:underline; }

.controls { display:flex; gap:.5rem; align-items:center; margin: .5rem 0 1rem; }
button { padding:.5rem .8rem; border-radius:.6rem; border:1px solid #ddd; background:#f8f8f8; cursor:pointer; }
button:hover { background:#f0f0f0; }

.song { line-height:1.7; font-size:1.05rem; }
.line { display:block; margin: .15rem 0; white-space:pre-wrap; }
/* Preserve stanza spacing */
.line.blank { height: 0.9rem; } /* adjust to taste (e.g., 1.2rem) */

/* Tuning knobs for the anchored character */
:root{
  /* Pull the anchored char slightly left to compensate lost kerning */
  --anchor-nudge-x: -0.02em;   /* try -0.015em .. -0.03em to taste */
  /* Drop the anchored char a touch so its baseline matches neighbors */
  --anchor-nudge-y: -0.05em;   /* try -0.03em .. -0.08em if needed */
  /* Distance between lyric and chord (tuneable) */
  --chord-gap: 0.12em; /* try 0.08em .. 0.18em to taste */
  /* Vertical space reserved above a line to fit chords (height of chord text) */
  --chord-offset: 1.05em; /* tune this if chords overlap (approx chord font-size) */
}

/* Anchored-char wrapper */
.seg{
  display:inline-block;
  position:relative;                 /* create containing block for absolute chord */
  vertical-align:baseline;           /* keep lyric baseline stable */
  text-align:center;
  margin:0;
  padding:0;
  /* Use transform to nudge the anchored char rather than adding margin that creates gaps */
  transform: translateX(var(--anchor-nudge-x)) translateY(var(--anchor-nudge-y));
}

/* First anchored char on a line: don't apply the horizontal nudge */
.line .seg:first-child{ transform: none; }

/* Chord above, absolutely positioned so it doesn't affect inline flow */
.seg .chord{
  position:absolute;
  left:50%;
  transform: translateX(-50%);
  bottom: calc(100% + var(--chord-gap)); /* place above the lyric; tune with --chord-gap */
  font-weight:700;
  line-height:1;
  white-space:nowrap;
}

/* Keep the lyric as inline so it participates in normal text flow */
.seg .lyric{ display:inline; }

/* Already good: stanza spacing and hide-chords behavior */
.line.blank{ height:0.9rem; }
body.hide-chords .seg .chord{ display:none; }
.song.chorded .line.has-chord{ padding-top: calc(var(--chord-gap) + var(--chord-offset)); }
.song.chorded .line.has-chord:first-child{ padding-top: calc(var(--chord-gap) + var(--chord-offset)); }
.song.chorded .line.has-chord .seg .chord{ visibility:visible; }
/* When chords are hidden remove the extra padding */
body.hide-chords .song.chorded .line.has-chord{ padding-top:0; }
.meta { color:var(--muted); font-size:.9rem; margin-bottom:.5rem; }
.empty { color:var(--muted); }
